plugins {
    id 'io.micronaut.build.internal.pulsar-module'
}

micronautBuild {
    binaryCompatibility {
        enabled = false
    }
}

dependencies {
    annotationProcessor mn.micronaut.inject.java
    annotationProcessor "io.micronaut.docs:micronaut-docs-asciidoc-config-props:$micronautDocsVersion"

    api mn.micronaut.inject
    api mn.micronaut.messaging
    api libs.managed.pulsar

    compileOnly "jakarta.inject:jakarta.inject-api"
    compileOnly "org.jetbrains.kotlinx:kotlinx-coroutines-core:$kotlinCoroutinesVersion"
    compileOnly 'com.google.protobuf:protobuf-java:3.20.1'
    compileOnly mn.micronaut.reactor
    compileOnly libs.micronaut.grpc.protobuf.support
}

test {
    jvmArgs '-Duser.country=US'
    jvmArgs '-Duser.language=en'
    testLogging {
        showStandardStreams = true
        exceptionFormat = 'full'
    }
    failFast = true
}

repositories {
    mavenCentral()
}
